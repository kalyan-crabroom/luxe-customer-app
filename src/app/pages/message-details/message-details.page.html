<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button text="" defaultHref="/" icon="assets/icons/back-btn-arrow.svg"></ion-back-button>
    </ion-buttons>
    <ion-title>Selected Message</ion-title>
  </ion-toolbar>
 <ion-grid class="p-0" [fixed]="true">
  <ion-item class="user-selected" lines="none" detail="true" (click)="goToTherapist(chatData.userId)">
    <ion-avatar slot="start">
      <!-- <img src='/assets/images/user1-image.jpg' /> -->
      <img [src]="chatData?.profile_image" onerror="this.src='/assets/images/user1-image.jpg'" alt="">
      <ion-icon *ngIf="chatData.gender" class="gender-icon" [ngStyle]="{
      'transform': chatData.gender === 'Male' ? 'rotate(218deg)' : 'rotate(0deg)',
      'transition': 'transform 0.3s ease'
    }" src="assets/icons/female.svg">
      </ion-icon>
    </ion-avatar>
    <ion-label>
      <h3> {{ chatData?.name ? chatData?.name : (chatData?.first_name + ' ' + chatData?.last_name?.charAt(0).toUpperCase() ) }}</h3>
    </ion-label>
  </ion-item>
 </ion-grid>
</ion-header>

<ion-content class="chat-bg ion-padding-vertical" id="content">
  <ion-grid class="chat-list ion-no-padding"  [fixed]="true">
    <div class="chat-history-box">
      <div class="chat-inner-content" *ngFor="let item of messages">
        <div [class.left-chat]="item.from != logUser.id" [class.right-chat]="item.from == logUser.id">
          <div [class.chat-message]="item.from != logUser.id" [class.r-chat-message]="item.from == logUser.id">
            <p>{{item.msg}}</p>
            <!-- <p class="time">{{item.createdAt | date}}</p> -->
            <p class="time">{{ calculateTimeAgo(item.createdAt) }}</p>
          </div>
        </div>
      </div>
    </div>
  </ion-grid>
</ion-content>
<ion-footer>
  <ion-grid class="p-0" [fixed]="true">
    <ion-row>
      <ion-col size="12">
        <div class="flex-box">
          <ion-item lines="none" class="field">
            <input class="message-input" id="chat_text" type="text" placeholder="Enter Message" [(ngModel)]="message" />
            <!-- <ion-input ></ion-input> -->
            <!-- <ion-buttons slot="end" (click)="toggleEmojiPicker()">
              <ion-button>
              </ion-button>
            </ion-buttons> -->
          </ion-item>
          <ion-button class="primary-btn rounded" (click)="sendMessage()">
            <ion-icon name="send"></ion-icon>
          </ion-button>
  
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
 
  <div *ngIf="showEmojiPicker">
    <emoji-mart (emojiClick)="selectEmoji($event)"></emoji-mart>
  </div>
</ion-footer>