<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button text="" defaultHref="/" icon="assets/icons/back-btn-arrow.svg"></ion-back-button>
    </ion-buttons>
    <ion-title>Session Complete</ion-title>
    <!-- <ion-buttons slot="end">
      <ion-button id="complete-session-trigger">
        <ion-icon name="help-circle"></ion-icon>
      </ion-button>
    </ion-buttons> -->
  </ion-toolbar>

  <!-- <ion-popover trigger="complete-session-trigger" triggerAction="click">
    <ng-template>
      <ion-content class="ion-padding">
        <p class="text-white help-text" [innerHTML]="helptext.content"></p>
      </ion-content>
    </ng-template>
  </ion-popover> -->
</ion-header>

<ion-content>
  <form [formGroup]="sessionComplete" (ngSubmit)="onSubmit(sessionComplete.value)">
    <ion-grid class="ion-padding" [fixed]="true">
      <ion-row>
        <ion-col size="12">
          <h1 class="page-title mb-20">Session Complete</h1>
        </ion-col>

        <ion-col size="12">
          <ion-list lines="none" class="list-style-1">
            <ion-item lines="none" class="ion-no-padding">
              <ion-avatar slot="start">
                <img [src]="userDetails.user_image" onerror="/assets/images/user1-image.jpg" />
              </ion-avatar>
              <ion-label>
                <h3>{{userDetails?.first_name}} {{ userDetails?.last_name?.charAt(0).toUpperCase() }}</h3>
              </ion-label>

            </ion-item>
          </ion-list>
        </ion-col>
        <ion-col size="12" *ngIf="showSpinner" class="ion-text-center">
          <ion-spinner color="light"></ion-spinner>
        </ion-col>
        <ion-col size="12" *ngIf="pageText?.content">
          <p class="paragraph mb-30" [innerHTML]="pageText?.content"></p>
        </ion-col>
        <ion-col size="12">
          <h1 class="section-titel mb-15 ">Your Rating</h1>
          <ion-card>
            <p class="star">
              <ion-text *ngFor="let star of [0,1,2,3,4]" (click)="selectRate(star)">
                <span *ngIf="rate >= star + 1">
                  <ion-icon name="star" size="large"></ion-icon>
                </span>
                <span *ngIf="rate < star + 1">
                  <ion-icon name="star-outline" size="large"></ion-icon>
                </span>
              </ion-text>
              <input type="hidden" formControlName="rating"/>
            </p>
          </ion-card>
        </ion-col>
        <ion-col size="12">
          <h1 class="section-titel mb-15 mt-15">Comments</h1>
          <ion-item lines="none" class="field rounded-25">
            <ion-textarea rows="7" placeholder="Write your comment here..." formControlName="message"></ion-textarea>
          </ion-item>
          <ng-container *ngFor="let validation of validation_messages.message">
            <p class="err"
              *ngIf="sessionComplete.get('message')?.hasError(validation.type) && (sessionComplete.get('message')?.dirty || sessionComplete.get('message')?.touched )">
              <ion-icon name="information-circle-outline"></ion-icon>{{validation.message}}
            </p>
          </ng-container>
        </ion-col>
        <ion-col size="12">
          <h1 class="section-titel mb-15 mt-15">Select Compliments</h1>
          <div class="check-box-group">
            <!-- <div class="checkBox">
              <ion-checkbox>Friendly</ion-checkbox>
            </div>
            <div class="checkBox">
              <ion-checkbox>Clean</ion-checkbox>
            </div>
            <div class="checkBox">
              <ion-checkbox>Punctual</ion-checkbox>
            </div>
            <div class="checkBox">
              <ion-checkbox>Respectful</ion-checkbox>
            </div> -->
            <div class="checkBox" *ngFor="let compliment of compliments">
              <ion-checkbox  mode="md" (ionChange)="toggleCompliment(compliment)" [checked]="isComplimentSelected(compliment)">
                {{ compliment }}
              </ion-checkbox>
            </div>
          </div>
        </ion-col>
      </ion-row>
      <ion-row class="mt-20 ion-justify-content-center">
        <ion-col size="12" size-md="6">
          <!-- [disabled]="sessionComplete.invalid" -->
          <ion-button expand="block" class="primary-btn" type="submit" >Submit</ion-button>
          <!-- <ion-button expand="block" class="primary-btn" type="submit" [disabled]="sessionComplete.invalid || !isValidSession()">Submit</ion-button> -->
        </ion-col>

        <!-- <ion-col size="12" size-md="6">
          <ion-button class="primary-btn-outline" expand="block" routerLink="/selected-session">Skip</ion-button>
        </ion-col> -->

        <ion-col size="12"  class="ion-text-center mt-20 mb-20">
          <ion-text class="text-link" (click)="goToReport()">Report Client</ion-text>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>